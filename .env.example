# AWS Credentials
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=ap-southeast-1

# S3 Config
S3_BUCKET=your-legal-retrieval-bucket
S3_KEY=processed_data/processed_data.zip

# Upload flag
UPLOAD_TO_S3=true

# MLflow DagsHub
MLFLOW_TRACKING_USERNAME=xxx
MLFLOW_TRACKING_PASSWORD=xxx
MLFLOW_TRACKING_URI=https://dagshub.com/...

# Telegram notification
TELEGRAM_BOT_TOKEN=xxx
TELEGRAM_CHAT_ID=yyy



(base) khai@khai-ASUS-TUF:~/Desktop/data/Code/mlops-retrieval-end2end$ tree
.
├── airflow
│   ├── airflow.cfg
│   ├── airflow.cfg.template
│   ├── airflow.db
│   ├── dags
│   │   ├── legal_retrieval_training_pipeline.py
│   │   └── __pycache__
│   │       └── legal_retrieval_training_pipeline.cpython-311.pyc
│   ├── logs
│   │   └── dag_processor
│   │       ├── 2026-01-09
│   │       │   ├── dags-folder
│   │       │   │   └── legal_retrieval_dag.py.log
│   ├── reports
│   │   └── bi-encoder
├── artifacts
│   ├── bi-encoder
│   │   ├── best_model
│   │   │   ├── model_config.json
│   │   │   ├── pytorch_model.bin
│   │   │   ├── special_tokens_map.json
│   │   │   ├── tokenizer_config.json
│   │   │   ├── tokenizer.json
│   │   │   └── vocab.txt
│   │   ├── best_model.pt
│   │   ├── checkpoint_epoch_0.pt
│   │   ├── dvc_metrics.json
│   │   ├── eval_results
│   │   │   ├── failed_cases.csv
│   │   │   ├── metrics.json
│   │   │   ├── predictions.csv
│   │   │   └── rankings_sample.csv
│   │   ├── model_config.json
│   │   ├── pytorch_model.bin
│   │   ├── special_tokens_map.json
│   │   ├── tokenizer_config.json
│   │   ├── tokenizer.json
│   │   └── vocab.txt
│   ├── corpus_embeddings
│   │   └── corpus_embeddings.pt
│   ├── cross-encoder
│   │   ├── best_model
│   │   │   ├── model_config.json
│   │   │   ├── pytorch_model.bin
│   │   │   ├── special_tokens_map.json
│   │   │   ├── tokenizer_config.json
│   │   │   ├── tokenizer.json
│   │   │   └── vocab.txt
│   │   ├── best_model.pt
│   │   ├── checkpoint_epoch_0.pt
│   │   ├── checkpoint_epoch_1
│   │   │   ├── classifier.pt
│   │   │   ├── config.json
│   │   │   ├── model.pt
│   │   │   ├── model.safetensors
│   │   │   ├── special_tokens_map.json
│   │   │   ├── tokenizer_config.json
│   │   │   ├── tokenizer.json
│   │   │   └── vocab.txt
│   │   ├── checkpoint_epoch_1.pt
│   │   ├── checkpoint_epoch_2.pt
│   │   ├── dvc_metrics.json
│   │   └── eval_results
│   │       ├── failed_cases.csv
│   │       ├── metrics.json
│   │       └── predictions.csv
├── cd
│   ├── canary_deploy.sh
│   ├── deploy_bi_encoder.sh
│   ├── deploy_cross_encoder.sh
│   ├── deploy_pipeline.sh
│   ├── health_check.sh
│   └── rollback.sh
├── ci
│   ├── build_bi_encoder.sh
│   ├── build_cross_encoder.sh
│   ├── lint.sh
│   └── test.sh
├── config
│   ├── bi-encoder
│   │   ├── eval.yaml
│   │   ├── serve.yaml
│   │   └── train.yaml
│   ├── corpus_embeddings.yaml
│   ├── cross-encoder
│   │   ├── eval.yaml
│   │   ├── serve.yaml
│   │   └── train.yaml
│   ├── data.yaml
│   ├── hard_negative_mining.yaml
│   ├── monitoring.yaml
│   └── rollback.yaml
├── data
│   ├── processed
│   │   ├── corpus_cleaned.csv
│   │   └── train_cleaned.csv
│   ├── raw
│   │   ├── corpus.csv
│   │   └── train.csv
│   └── use
│       ├── corpus_tokenized.csv
│       ├── test_local.csv
│       ├── test_split.csv
│       ├── test_with_hard_negatives.csv
│       ├── train_split.csv
│       ├── train_tokenized.csv
│       ├── train_with_hard_negatives.csv
│       ├── val_split.csv
│       └── val_with_hard_negatives.csv
├── docker
│   ├── bi_encoder
│   │   └── Dockerfile.serverless
│   └── cross_encoder
│       └── Dockerfile.serverless
├── dvc.lock
├── dvc.yaml
├── logs
│   └── models
├── monitoring
│   ├── alerts
│   ├── grafana
│   │   └── dashboards
│   │       ├── bi_encoder_dashboard.json
│   │       ├── cross_encoder_dashboard.json
│   │       └── pipeline_dashboard.json
│   └── prometheus
│       ├── bi_encoder_alerts.yml
│       ├── cross_encoder_alerts.yml
│       └── rules.yml
├── reports
│   ├── bi-encoder
│   │   ├── failed_cases.csv
│   │   ├── metrics.json
│   │   ├── predictions.csv
│   │   ├── rankings_sample.csv
│   │   └── train_metrics.json
│   ├── cross-encoder
│   │   ├── failed_cases.csv
│   │   ├── metrics.json
│   │   └── predictions.csv
│   └── validation_metrics.json
├── requirements-docker.txt
├── requirements.txt
├── scripts
│   ├── download_checkpoints_from_s3.py
│   ├── __init__.py
│   └── update_s3_latest.py
├── src
│   ├── clients
│   │   ├── __init__.py
│   │   └── runpod_client.py
│   ├── common
│   │   ├── configuration.py
│   │   ├── constants.py
│   │   ├── __init__.py
│   │   ├── logging_config.py
│   │   ├── model_gates
│   │   │   ├── __init__.py
│   │   │   └── retrieval_candidate_gate.py
│   │   ├── notify
│   │   │   ├── __init__.py
│   │   │   └── telegram.py
│   │   ├── s3_utils.py
│   │   └── utils.py
│   ├── data
│   │   ├── data_ingestion.py
│   │   ├── __init__.py
│   │   ├── pipeline.py
│   │   ├── processors.py
│   ├── entity
│   │   ├── config_entity.py
│   │   ├── __init__.py
│   ├── eval
│   │   ├── bi_encoder_evaluator.py
│   │   ├── cross_encoder_evaluator.py
│   │   ├── __init__.py
│   │   ├── metrics
│   │   │   ├── __init__.py
│   │   │   ├── rerank_metrics.py
│   │   │   └── retrieval_metrics.py
│   ├── features
│   │   ├── build_corpus_embeddings.py
│   │   ├── hard_negative_mining.py
│   │   ├── __init__.py
│   ├── __init__.py
│   ├── models
│   │   ├── bi_encoder
│   │   │   ├── __init__.py
│   │   │   ├── loss.py
│   │   │   ├── model.py
│   │   │   ├── pooling.py
│   │   ├── cross_encoder
│   │   │   ├── __init__.py
│   │   │   ├── loss.py
│   │   │   ├── model.py
│   │   ├── __init__.py
│   ├── monitoring
│   │   ├── alert_rules.py
│   │   ├── embedding_drift.py
│   │   ├── __init__.py
│   │   ├── performance_tracker.py
│   │   └── similarity_distribution.py
│   ├── registry
│   │   ├── __init__.py
│   │   ├── mlflow_client.py
│   │   ├── model_registry.py
│   │   ├── promote.py
│   ├── retraining
│   │   ├── __init__.py
│   │   ├── policy.py
│   │   └── trigger.py
│   ├── serve
│   │   ├── bi_encoder_service
│   │   │   ├── app.py
│   │   │   ├── embedding.py
│   │   │   ├── __init__.py
│   │   │   ├── model_loader.py
│   │   │   ├── runpod_handler.py
│   │   │   └── schema.py
│   │   ├── cross_encoder_service
│   │   │   ├── app.py
│   │   │   ├── __init__.py
│   │   │   ├── model_loader.py
│   │   │   ├── reranker.py
│   │   │   ├── runpod_handler.py
│   │   │   └── schema.py
│   │   ├── __init__.py
│   └── train
│       ├── bi_encoder
│       │   ├── dataset.py
│       │   ├── __init__.py
│       │   └── trainer.py
│       ├── callbacks.py
│       ├── cross_encoder
│       │   ├── dataset.py
│       │   ├── __init__.py
│       │   └── trainer.py
│       ├── __init__.py
└── tests
    ├── integration
    └── unit

